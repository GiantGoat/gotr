# copied from http://craychee.io/blog/2015/04/11/circleci/
machine:
  environment:
    SERVER: giantgoat.local
  php:
    version: 5.5.21
  hosts:
    SERVER: 127.0.0.1

dependencies:
  pre:

  # Codesniffer.
  - composer global require squizlabs/php_codesniffer:2.0.*@dev

  # Coder.
  - composer global require drupal/coder:8.2.0-beta1
  - ln -s ~/.composer/vendor/drupal/coder/coder_sniffer/Drupal ~/.composer/vendor/squizlabs/php_codesniffer/CodeSniffer/Standards/

#    - cp cnf/circle.conf /etc/apache2/sites-available/default
#    - sudo sed -e "s?%HOME%?$(pwd)?g" --in-place /etc/apache2/sites-available/default
#     - sudo sed -e "s?%PROJECT_DIR%?www?g" --in-place /etc/apache2/sites-available/default
#     - sudo sed -e "s?%SERVER%?SERVER?g" --in-place /etc/apache2/sites-available/default
#     - sudo a2enmod rewrite
#     - sudo service apache2 restart
#     - cp cnf/settings.php www/sites/default
#   override:
#     - composer install --prefer-dist
#   post:
#     - sudo chown -R $(whoami):www-data www
#     - build/install.sh

   test:
      override:
          - phpcs --report=full --standard=Drupal sites/all/modules/collab
